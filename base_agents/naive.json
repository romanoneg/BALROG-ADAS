{
    "code": "import copy\nimport re\n\nfrom balrog.agents.base import BaseAgent\n\n\nclass NaiveAgent(BaseAgent):\n    \"\"\"An agent that generates actions based on observations without complex reasoning.\"\"\"\n\n    def __init__(self, client_factory, prompt_builder):\n        \"\"\"Initialize the NaiveAgent with a client and prompt builder.\"\"\"\n        super().__init__(client_factory, prompt_builder)\n        self.client = client_factory()\n\n    def act(self, obs, prev_action=None):\n        \"\"\"Generate the next action based on the observation and previous action.\n\n        Args:\n            obs (dict): The current observation in the environment.\n            prev_action (str, optional): The previous action taken.\n\n        Returns:\n            str: The selected action from the LLM response.\n        \"\"\"\n        if prev_action:\n            self.prompt_builder.update_action(prev_action)\n\n        self.prompt_builder.update_observation(obs)\n\n        messages = self.prompt_builder.get_prompt()\n\n        naive_instruction = \"\"\"\nYou always have to output one of the above actions at a time and no other text. You always have to output an action until the episode terminates.\n        \"\"\".strip()\n\n        if messages and messages[-1].role == \"user\":\n            messages[-1].content += \"\\n\\n\" + naive_instruction\n\n        response = self.client.generate(messages)\n\n        final_answer = self._extract_final_answer(response)\n\n        return final_answer\n\n    def _extract_final_answer(self, answer):\n        \"\"\"Sanitize the final answer, keeping only alphabetic characters.\n\n        Args:\n            answer (LLMResponse): The response from the LLM.\n\n        Returns:\n            LLMResponse: The sanitized response.\n        \"\"\"\n\n        def filter_letters(input_string):\n            return re.sub(r\"[^a-zA-Z\\s:]\", \"\", input_string)\n\n        final_answer = copy.deepcopy(answer)\n        final_answer = final_answer._replace(completion=filter_letters(final_answer.completion))\n\n        return final_answer\n"
}